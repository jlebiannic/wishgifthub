openapi: 3.0.3
info:
  title: WishGiftHub API
  description: |
    API REST pour la gestion d'événements et de listes de souhaits.
    
    ## Fonctionnalités principales
    - Authentification des administrateurs et utilisateurs invités
    - Gestion des groupes d'événements (Noël)
    - Système d'invitations par email
    - Gestion des listes de souhaits
    - Réservation de cadeaux
    
    ## Sécurité
    - Authentification JWT pour tous les endpoints protégés
    - Les administrateurs peuvent créer et gérer des groupes
    - Les utilisateurs invités accèdent via un token d'invitation unique

  version: 1.0.0
  contact:
    name: WishGiftHub Team
servers:
  - url: http://localhost:8080
    description: Serveur de développement local
  - url: https://api.wishgifthub.com
    description: Serveur de production

tags:
  - name: Authentification
    description: Endpoints pour l'inscription et la connexion des administrateurs
  - name: Groupes
    description: Gestion des groupes d'événements
  - name: Invitations
    description: Création et acceptation d'invitations
  - name: Utilisateurs
    description: Consultation des groupes et membres
  - name: Souhaits
    description: Gestion des listes de souhaits et réservations
  - name: Metadata
    description: Extraction de métadonnées depuis des URLs

security:
  - bearerAuth: []

paths:
  # Authentication endpoints
  /api/auth/register:
    $ref: './paths/auth-endpoints.yml#/~1api~1auth~1register'
  /api/auth/login:
    $ref: './paths/auth-endpoints.yml#/~1api~1auth~1login'

  # Group endpoints
  /api/groups:
    $ref: './paths/group-endpoints.yml#/~1api~1groups'
  /api/groups/{groupId}:
    $ref: './paths/group-endpoints.yml#/~1api~1groups~1{groupId}'

  # Invitation endpoints
  /api/groups/{groupId}/invite:
    $ref: './paths/invitation-endpoints.yml#/~1api~1groups~1{groupId}~1invite'
  /api/groups/{groupId}/invitations:
    $ref: './paths/invitation-endpoints.yml#/~1api~1groups~1{groupId}~1invitations'
  /api/invite/{token}:
    $ref: './paths/invitation-endpoints.yml#/~1api~1invite~1{token}'

  # User group endpoints
  /api/groups/me:
    $ref: './paths/user-group-endpoints.yml#/~1api~1groups~1me'
  /api/groups/{groupId}/users:
    $ref: './paths/user-group-endpoints.yml#/~1api~1groups~1{groupId}~1users'

  # User endpoints
  /api/users/me/avatar:
    $ref: './paths/user-endpoints.yml#/~1api~1users~1me~1avatar'

  # Wish endpoints
  /api/groups/{groupId}/wishes:
    $ref: './paths/wish-endpoints.yml#/~1api~1groups~1{groupId}~1wishes'
  /api/groups/{groupId}/wishes/me:
    $ref: './paths/wish-endpoints.yml#/~1api~1groups~1{groupId}~1wishes~1me'
  /api/groups/{groupId}/wishes/users/{userId}:
    $ref: './paths/wish-endpoints.yml#/~1api~1groups~1{groupId}~1wishes~1users~1{userId}'
  /api/groups/{groupId}/wishes/{wishId}:
    $ref: './paths/wish-endpoints.yml#/~1api~1groups~1{groupId}~1wishes~1{wishId}'
  /api/groups/{groupId}/wishes/{wishId}/reserve:
    $ref: './paths/wish-endpoints.yml#/~1api~1groups~1{groupId}~1wishes~1{wishId}~1reserve'

  # Metadata endpoint
  /api/metadata:
    $ref: './paths/metadata-endpoints.yml#/~1api~1metadata'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Token JWT obtenu après inscription/connexion (admin) ou acceptation d'invitation (utilisateur).
        
        Format: `Authorization: Bearer <token>`


