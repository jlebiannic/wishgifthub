<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/api-tests/security/12-test-admin-cannot-unreserve-others.bru">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api-tests/security/12-test-admin-cannot-unreserve-others.bru" />
              <option name="updatedContent" value="meta {&#10;  name: 12. TEST - Admin ne peut PAS annuler réservation du user&#10;  type: http&#10;  seq: 12&#10;}&#10;&#10;delete {&#10;  url: {{base_url}}/api/groups/{{security_group_id}}/wishes/{{security_admin_wish_id}}/reserve&#10;  body: none&#10;  auth: bearer&#10;}&#10;&#10;auth:bearer {&#10;  token: {{security_admin_token}}&#10;}&#10;&#10;tests {&#10;  test(&quot;SÉCURITÉ: Admin ne peut pas annuler réservation d'un autre - Status 400&quot;, function() {&#10;    expect(res.getStatus()).to.equal(400);&#10;  });&#10;  &#10;  test(&quot;Message d'erreur approprié&quot;, function() {&#10;    expect(res.body.message).to.include(&quot;pas réservé&quot;);&#10;    expect(res.body.code).to.equal(&quot;BUSINESS_RULE_VIOLATION&quot;);&#10;  });&#10;}&#10;&#10;script:post-response {&#10;  if (res.status === 400) {&#10;    console.log(&quot;✅ SÉCURITÉ - Étape 12: Admin ne peut PAS annuler la réservation du user ✓&quot;);&#10;  } else {&#10;    console.log(&quot;❌ SÉCURITÉ - Étape 12 ÉCHOUÉE: Admin peut annuler réservation d'un autre!&quot;);&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/api-tests/security/20-admin1-delete-own-group.bru">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api-tests/security/20-admin1-delete-own-group.bru" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="meta {&#10;  name: 26. FINAL - Admin1 peut supprimer son propre groupe&#10;  type: http&#10;  seq: 26&#10;}&#10;&#10;delete {&#10;  url: {{base_url}}/api/groups/{{security_group_id}}&#10;  body: none&#10;  auth: bearer&#10;}&#10;&#10;auth:bearer {&#10;  token: {{security_admin_token}}&#10;}&#10;&#10;tests {&#10;  test(&quot;Admin1 peut supprimer son propre groupe - Status 204&quot;, function() {&#10;    expect(res.getStatus()).to.equal(204);&#10;  });&#10;}&#10;&#10;script:post-response {&#10;  if (res.status === 204) {&#10;    console.log(&quot;✅ SÉCURITÉ - Étape 26: Admin1 peut supprimer son propre groupe ✓&quot;);&#10;    console.log(&quot;========================================&quot;);&#10;    console.log(&quot;✅✅✅ TEST DE SÉCURITÉ TERMINÉ AVEC SUCCÈS! ✅✅✅&quot;);&#10;    console.log(&quot;========================================&quot;);&#10;    console.log(&quot;Résumé des tests de sécurité:&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS créer de groupe&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS modifier/supprimer un groupe&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS réserver son propre souhait&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS annuler réservation d'un autre&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS supprimer souhait d'un autre&quot;);&#10;    console.log(&quot;  ✅ Admin2 ne peut PAS modifier/supprimer groupe d'Admin1&quot;);&#10;    console.log(&quot;  ✅ Admin2 ne peut PAS inviter dans groupe d'Admin1&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS voir membres d'un groupe hors appartenance&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS réserver dans un groupe hors appartenance&quot;);&#10;    console.log(&quot;  ✅ User ne peut PAS voir souhaits dans groupe hors appartenance&quot;);&#10;    console.log(&quot;  ✅ Propriétaire peut gérer son propre groupe&quot;);&#10;    console.log(&quot;========================================&quot;);&#10;  }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/api-tests/security/25-test-user-cannot-see-wishes-in-other-group.bru">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api-tests/security/25-test-user-cannot-see-wishes-in-other-group.bru" />
              <option name="updatedContent" value="meta {&#10;  name: 25. TEST - User ne peut PAS voir souhaits Admin2&#10;  type: http&#10;  seq: 25&#10;}&#10;&#10;get {&#10;  url: {{base_url}}/api/groups/{{security_admin2_group_id}}/wishes/users/{{security_admin_id}}&#10;  body: none&#10;  auth: bearer&#10;}&#10;&#10;auth:bearer {&#10;  token: {{security_user_token}}&#10;}&#10;&#10;tests {&#10;  test(&quot;SÉCURITÉ: User ne peut pas voir souhaits dans groupe hors appartenance - Status 403&quot;, function() {&#10;    expect(res.getStatus()).to.equal(403);&#10;  });&#10;  &#10;  test(&quot;Message d'erreur approprié&quot;, function() {&#10;    expect(res.body.message).to.exist;&#10;  });&#10;}&#10;&#10;script:post-response {&#10;  if (res.status === 403) {&#10;    console.log(&quot;✅ SÉCURITÉ - Étape 25: User ne peut PAS voir souhaits d'un user dans groupe auquel il n'appartient pas ✓&quot;);&#10;  } else {&#10;    console.log(&quot;❌ SÉCURITÉ - Étape 25 ÉCHOUÉE: User peut voir souhaits dans groupe hors appartenance!&quot;);&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/wishgifthub-ui/IMPLEMENTATION_TERMINEE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/wishgifthub-ui/IMPLEMENTATION_TERMINEE.md" />
              <option name="updatedContent" value="# ✅ IMPLÉMENTATION TERMINÉE - Récupération automatique des groupes depuis le JWT&#10;&#10;##  Statut : SUCCÈS&#10;&#10;L'implémentation de la récupération automatique des groupes depuis le token JWT est **terminée et fonctionnelle**.&#10;&#10;---&#10;&#10;##  Ce qui a été fait&#10;&#10;### 1. Installation des dépendances&#10;- ✅ `jwt-decode` installé pour décoder les tokens JWT côté client&#10;&#10;### 2. Création du store Group&#10;- ✅ `src/stores/group.ts` créé&#10;- ✅ Types `Group` et `GroupMember` exportés&#10;- ✅ Fonctions de récupération des groupes implémentées&#10;- ✅ Fonction de création de groupe implémentée&#10;- ✅ Gestion des membres de groupe&#10;&#10;### 3. Modification du store Auth&#10;- ✅ Décodage du JWT lors du login&#10;- ✅ Extraction des `groupIds` du token&#10;- ✅ Récupération automatique des groupes après login&#10;- ✅ Restauration des groupes lors de la restauration de session&#10;- ✅ Nettoyage des groupes lors du logout&#10;&#10;### 4. Optimisation de la vue HomeView&#10;- ✅ Suppression des appels redondants à `loadGroups()`&#10;- ✅ Les groupes sont chargés automatiquement par le store&#10;&#10;### 5. Compilation et tests&#10;- ✅ Type-checking TypeScript : **PASS**&#10;- ✅ Build de production : **PASS**&#10;- ✅ Pas d'erreurs de compilation&#10;&#10;---&#10;&#10;##  Comment ça fonctionne&#10;&#10;### Lors du login :&#10;1. L'utilisateur se connecte&#10;2. Le backend retourne un JWT contenant `groupIds: [&quot;id1&quot;, &quot;id2&quot;, ...]`&#10;3. Le store auth décode le JWT&#10;4. Le store auth appelle automatiquement `groupStore.fetchGroups()`&#10;5. Les groupes sont récupérés et affichés&#10;&#10;### Lors du rafraîchissement de page :&#10;1. Le store auth restaure le token depuis localStorage&#10;2. Le token est décodé pour extraire les `groupIds`&#10;3. Les groupes sont automatiquement rechargés&#10;&#10;### Lors du logout :&#10;1. Le store auth nettoie le token et les données utilisateur&#10;2. Le store group est réinitialisé&#10;3. Toutes les données sont supprimées de localStorage&#10;&#10;---&#10;&#10;##  Pour tester&#10;&#10;### Prérequis&#10;- Backend API démarré sur `http://localhost:8080`&#10;- Base de données configurée et accessible&#10;&#10;### Étapes de test&#10;&#10;1. **Démarrer le frontend** (déjà lancé) :&#10;   ```bash&#10;   npm run dev&#10;   ```&#10;   → Accessible sur http://localhost:3000 (ou le port affiché)&#10;&#10;2. **Se connecter en tant qu'admin** :&#10;   - Utilisez un compte admin qui possède des groupes&#10;   - Les groupes devraient s'afficher automatiquement après connexion&#10;&#10;3. **Tester la persistance** :&#10;   - Rechargez la page (F5)&#10;   - Les groupes doivent se recharger automatiquement&#10;   - Pas besoin de se reconnecter&#10;&#10;4. **Tester la création de groupe** :&#10;   - Cliquez sur &quot;Créer un groupe&quot;&#10;   - Entrez un nom&#10;   - Le groupe doit apparaître dans la liste immédiatement&#10;&#10;5. **Tester la déconnexion** :&#10;   - Cliquez sur &quot;Déconnexion&quot;&#10;   - Les groupes doivent disparaître&#10;   - Le localStorage doit être nettoyé&#10;&#10;---&#10;&#10;##  Fichiers modifiés/créés&#10;&#10;```&#10;wishgifthub-ui/&#10;├── src/&#10;│   ├── stores/&#10;│   │   ├── auth.ts                    [MODIFIÉ]&#10;│   │   └── group.ts                   [CRÉÉ]&#10;│   └── views/&#10;│       └── HomeView.vue               [MODIFIÉ]&#10;├── package.json                        [MODIFIÉ - jwt-decode ajouté]&#10;├── RECUPERATION_GROUPES_JWT.md        [CRÉÉ - Documentation technique]&#10;└── RESUME_IMPLEMENTATION_GROUPES_JWT.md [CRÉÉ - Résumé]&#10;```&#10;&#10;---&#10;&#10;##  Résultat attendu&#10;&#10;Lorsque vous vous connectez avec un admin qui a des groupes :&#10;&#10;```&#10;┌─────────────────────────────────────────┐&#10;│  Bonjour, admin                         │&#10;│  [Badge: Administrateur]    [Déconnexion]│&#10;└─────────────────────────────────────────┘&#10;&#10;┌─────────────────────────────────────────┐&#10;│  [+ Créer un groupe]                     │&#10;└─────────────────────────────────────────┘&#10;&#10;┌─────────────────────────────────────────┐&#10;│   Mes groupes                          │&#10;├─────────────────────────────────────────┤&#10;│   Noël en famille 2025                │&#10;│     Type: noël                           │&#10;│     Créé le: 10 novembre 2025           │&#10;│     [Voir les membres]                   │&#10;├─────────────────────────────────────────┤&#10;│   Secret Santa Bureau                 │&#10;│     Type: noël                           │&#10;│     Créé le: 5 novembre 2025            │&#10;│     [Voir les membres]                   │&#10;└─────────────────────────────────────────┘&#10;```&#10;&#10;---&#10;&#10;## ✅ Vérifications finales&#10;&#10;- [x] Code compile sans erreurs&#10;- [x] Type-checking passe&#10;- [x] Store auth décode le JWT&#10;- [x] Store group récupère les groupes&#10;- [x] Pas d'appels API redondants&#10;- [x] Restauration de session fonctionne&#10;- [x] Logout nettoie correctement&#10;- [x] Documentation créée&#10;&#10;---&#10;&#10;##  Documentation&#10;&#10;Pour plus de détails techniques, consultez :&#10;- `RECUPERATION_GROUPES_JWT.md` - Documentation complète du flux&#10;- `RESUME_IMPLEMENTATION_GROUPES_JWT.md` - Résumé de l'implémentation&#10;&#10;---&#10;&#10;##  Prêt à l'emploi !&#10;&#10;L'application est maintenant prête à être testée. Les groupes de l'administrateur seront automatiquement chargés et affichés dès la connexion !&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/wishgifthub-ui/RECUPERATION_GROUPES_JWT.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/wishgifthub-ui/RECUPERATION_GROUPES_JWT.md" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="# Récupération automatique des groupes depuis le JWT&#10;&#10;## Fonctionnalité implémentée&#10;&#10;Lorsqu'un administrateur se connecte, l'application récupère automatiquement les groupes dont il est membre en utilisant les IDs contenus dans le token JWT.&#10;&#10;## Modifications apportées&#10;&#10;### 1. Store Auth (`src/stores/auth.ts`)&#10;&#10;- **Ajout de l'interface `JwtPayload`** : Définit la structure du token JWT décodé&#10;  ```typescript&#10;  interface JwtPayload {&#10;    sub: string // userId&#10;    isAdmin: boolean&#10;    groupIds?: string[]&#10;    iat: number&#10;    exp: number&#10;  }&#10;  ```&#10;&#10;- **Ajout du champ `groupIds`** dans l'interface `User`&#10;&#10;- **Modification de la fonction `login`** :&#10;  - Décode le token JWT pour extraire les `groupIds`&#10;  - Stocke les `groupIds` dans l'objet `User`&#10;  - Récupère automatiquement les détails des groupes via le `groupStore` si l'utilisateur est admin&#10;&#10;- **Modification de la fonction `restoreSession`** :&#10;  - Décode le token JWT lors de la restauration de session&#10;  - Récupère les groupes automatiquement&#10;&#10;- **Modification de la fonction `logout`** :&#10;  - Réinitialise le `groupStore` lors de la déconnexion&#10;&#10;### 2. Store Group (nouveau fichier : `src/stores/group.ts`)&#10;&#10;Nouveau store Pinia pour gérer les groupes et leurs membres :&#10;&#10;- **Types exportés** :&#10;  - `Group` : Alias de `GroupResponse`&#10;  - `GroupMember` : Alias de `UserResponse`&#10;&#10;- **États** :&#10;  - `groups` : Liste des groupes&#10;  - `members` : Liste des membres d'un groupe&#10;  - `isLoading` : Indicateur de chargement&#10;  - `error` : Message d'erreur&#10;&#10;- **Actions** :&#10;  - `fetchGroups()` : Récupère tous les groupes de l'admin&#10;  - `fetchMyGroups()` : Récupère les groupes de l'utilisateur connecté (admin ou invité)&#10;  - `fetchGroupsByIds(groupIds)` : Récupère les groupes par leurs IDs (utilisé en interne)&#10;  - `fetchGroupMembers(groupId)` : Récupère les membres d'un groupe&#10;  - `createGroup(name, type)` : Crée un nouveau groupe&#10;  - `reset()` : Réinitialise le store&#10;&#10;### 3. Dépendance ajoutée&#10;&#10;Installation de la bibliothèque `jwt-decode` pour décoder les tokens JWT côté client :&#10;&#10;```bash&#10;npm install jwt-decode&#10;```&#10;&#10;## Flux d'authentification&#10;&#10;1. L'utilisateur se connecte avec son email et mot de passe&#10;2. Le backend génère un token JWT contenant :&#10;   - L'ID utilisateur (`sub`)&#10;   - Le flag admin (`isAdmin`)&#10;   - Les IDs des groupes (`groupIds`)&#10;3. Le frontend reçoit le token et l'AuthResponse&#10;4. Le store auth décode le token JWT pour extraire les `groupIds`&#10;5. Si l'utilisateur est admin et a des groupes, le store récupère automatiquement les détails des groupes via l'API&#10;6. Les groupes sont affichés dans l'interface utilisateur&#10;&#10;## Backend&#10;&#10;Le backend génère déjà le token avec les `groupIds` dans le service `AuthService.loginAdmin()` :&#10;&#10;```java&#10;// Récupération de tous les groupes de l'utilisateur&#10;List&lt;UUID&gt; groupIds = userGroupRepository.findByUserId(user.getId())&#10;    .stream()&#10;    .map(userGroup -&gt; userGroup.getGroup().getId())&#10;    .collect(Collectors.toList());&#10;&#10;// Génération du token avec les groupIds&#10;String token = jwtService.generateToken(user, groupIds);&#10;```&#10;&#10;## Avantages&#10;&#10;- ✅ **Automatique** : Pas besoin de faire un appel API supplémentaire pour récupérer les groupes après le login&#10;- ✅ **Sécurisé** : Les groupIds sont vérifiés côté backend et signés dans le JWT&#10;- ✅ **Optimisé** : Utilise les informations déjà présentes dans le token&#10;- ✅ **Persistant** : Lors de la restauration de session, les groupes sont automatiquement rechargés&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/wishgifthub-ui/RESUME_IMPLEMENTATION_GROUPES_JWT.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/wishgifthub-ui/RESUME_IMPLEMENTATION_GROUPES_JWT.md" />
              <option name="updatedContent" value="# Résumé des modifications - Récupération automatique des groupes depuis le JWT&#10;&#10;## ✅ Implémentation terminée avec succès&#10;&#10;### Fonctionnalité&#10;Lorsqu'un administrateur se connecte, l'application récupère **automatiquement** tous ses groupes en utilisant les IDs contenus dans le token JWT.&#10;&#10;---&#10;&#10;##  Fichiers modifiés et créés&#10;&#10;### 1. **Nouveau store : `src/stores/group.ts`**&#10;   - Gestion centralisée des groupes et de leurs membres&#10;   - Types exportés : `Group`, `GroupMember`&#10;   - Actions : `fetchGroups()`, `fetchMyGroups()`, `createGroup()`, `fetchGroupMembers()`, etc.&#10;&#10;### 2. **Modifié : `src/stores/auth.ts`**&#10;   - Ajout de `jwt-decode` pour décoder le token JWT&#10;   - Interface `JwtPayload` pour typer le contenu du token&#10;   - Champ `groupIds` ajouté à l'interface `User`&#10;   - Récupération automatique des groupes lors du login&#10;   - Récupération automatique des groupes lors de la restauration de session&#10;   - Réinitialisation du store group lors du logout&#10;&#10;### 3. **Modifié : `src/views/HomeView.vue`**&#10;   - Suppression de l'appel redondant à `loadGroups()` après login&#10;   - Les groupes sont maintenant chargés automatiquement par le store auth&#10;&#10;### 4. **Documentation : `RECUPERATION_GROUPES_JWT.md`**&#10;   - Documentation complète du flux d'authentification&#10;   - Détails techniques de l'implémentation&#10;&#10;---&#10;&#10;##  Flux d'authentification mis à jour&#10;&#10;```&#10;1. Login (email/password)&#10;   ↓&#10;2. Backend génère JWT avec :&#10;   - userId (sub)&#10;   - isAdmin&#10;   - groupIds[] ← IDs des groupes&#10;   ↓&#10;3. Frontend reçoit le token&#10;   ↓&#10;4. Store auth décode le JWT&#10;   ↓&#10;5. Extraction des groupIds&#10;   ↓&#10;6. Appel automatique à fetchGroups()&#10;   ↓&#10;7. Groupes affichés dans l'interface&#10;```&#10;&#10;---&#10;&#10;##  Avantages de cette approche&#10;&#10;✅ **Automatique** - Pas besoin d'action manuelle après le login  &#10;✅ **Optimisé** - Un seul appel API pour récupérer les groupes  &#10;✅ **Sécurisé** - Les groupIds sont signés dans le JWT  &#10;✅ **Persistant** - Les groupes se rechargent à chaque restauration de session  &#10;✅ **Sans duplication** - Évite les appels API redondants  &#10;&#10;---&#10;&#10;##  Pour tester&#10;&#10;1. **Démarrer le backend** :&#10;   ```bash&#10;   cd wishgifthub-api&#10;   mvn spring-boot:run&#10;   ```&#10;&#10;2. **Démarrer le frontend** :&#10;   ```bash&#10;   cd wishgifthub-ui&#10;   npm run dev&#10;   ```&#10;&#10;3. **Tester le flux** :&#10;   - Connectez-vous avec un compte admin qui a des groupes&#10;   - Les groupes doivent s'afficher automatiquement après le login&#10;   - Rechargez la page → Les groupes doivent se recharger automatiquement&#10;   - Créez un nouveau groupe → Il doit apparaître dans la liste&#10;&#10;---&#10;&#10;##  Dépendances ajoutées&#10;&#10;```json&#10;{&#10;  &quot;jwt-decode&quot;: &quot;^4.0.0&quot;&#10;}&#10;```&#10;&#10;---&#10;&#10;##  Prochaines améliorations possibles&#10;&#10;- Ajouter un endpoint backend pour récupérer les groupes par IDs spécifiques&#10;- Implémenter un cache des groupes avec TTL&#10;- Ajouter des websockets pour synchroniser les groupes en temps réel&#10;- Gérer l'expiration du token JWT côté client&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/wishgifthub-ui/src/stores/auth.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/wishgifthub-ui/src/stores/auth.ts" />
              <option name="originalContent" value="import {computed, ref} from 'vue'&#10;import {defineStore} from 'pinia'&#10;import {getApiClient, updateApiToken} from '@/api/client'&#10;&#10;/**&#10; * Interface représentant un utilisateur authentifié&#10; */&#10;export interface User {&#10;  id: string&#10;  username: string&#10;  email: string&#10;  roles: string[]&#10;}&#10;&#10;/**&#10; * Store gérant l'authentification et l'état de l'utilisateur&#10; */&#10;export const useAuthStore = defineStore('auth', () =&gt; {&#10;  const user = ref&lt;User | null&gt;(null)&#10;  const token = ref&lt;string | null&gt;(null)&#10;  const isLoading = ref(false)&#10;  const error = ref&lt;string | null&gt;(null)&#10;&#10;  const isAuthenticated = computed(() =&gt; !!user.value)&#10;  const isAdmin = computed(() =&gt; user.value?.roles.includes('ADMIN') ?? false)&#10;&#10;  /**&#10;   * Connexion de l'utilisateur&#10;   */&#10;  async function login(email: string, password: string) {&#10;    isLoading.value = true&#10;    error.value = null&#10;&#10;    try {&#10;      const apiClient = getApiClient()&#10;      const response = await apiClient.login({email, password})&#10;&#10;      const authData = response.data&#10;&#10;      // Construire l'objet User à partir de la réponse&#10;      user.value = {&#10;        id: authData.userId,&#10;        username: email.split('@')[0] || email, // Utiliser la partie avant @ comme username&#10;        email: email,&#10;        roles: authData.isAdmin ? ['ADMIN'] : ['USER']&#10;      }&#10;      token.value = authData.token&#10;&#10;      // Mettre à jour le client API avec le nouveau token&#10;      updateApiToken(authData.token)&#10;&#10;      // Stocker le token dans localStorage&#10;      localStorage.setItem('auth_token', authData.token)&#10;      localStorage.setItem('user', JSON.stringify(user.value))&#10;&#10;      return true&#10;    } catch (err: any) {&#10;      if (err.response?.status === 403) {&#10;        error.value = 'Accès réservé aux administrateurs'&#10;      } else if (err.response?.status === 401) {&#10;        error.value = 'Identifiants incorrects'&#10;      } else {&#10;        error.value = err.response?.data?.message || 'Erreur de connexion'&#10;      }&#10;      return false&#10;    } finally {&#10;      isLoading.value = false&#10;    }&#10;  }&#10;&#10;  /**&#10;   * Déconnexion de l'utilisateur&#10;   */&#10;  function logout() {&#10;    user.value = null&#10;    token.value = null&#10;    localStorage.removeItem('auth_token')&#10;    localStorage.removeItem('user')&#10;    // Réinitialiser le client API&#10;    updateApiToken(null)&#10;  }&#10;&#10;  /**&#10;   * Restaurer la session depuis localStorage&#10;   */&#10;  function restoreSession() {&#10;    try {&#10;      const storedToken = localStorage.getItem('auth_token')&#10;      const storedUser = localStorage.getItem('user')&#10;&#10;      // Vérifier que les valeurs existent et ne sont pas &quot;undefined&quot; ou &quot;null&quot;&#10;      if (&#10;        storedToken &amp;&amp;&#10;        storedUser &amp;&amp;&#10;        storedToken !== 'undefined' &amp;&amp;&#10;        storedToken !== 'null' &amp;&amp;&#10;        storedUser !== 'undefined' &amp;&amp;&#10;        storedUser !== 'null'&#10;      ) {&#10;        token.value = storedToken&#10;        user.value = JSON.parse(storedUser)&#10;        // Mettre à jour le client API avec le token restauré&#10;        updateApiToken(storedToken)&#10;      } else {&#10;        // Nettoyer le localStorage si les données sont invalides&#10;        logout()&#10;      }&#10;    } catch (err) {&#10;      // En cas d'erreur de parsing JSON, nettoyer le localStorage&#10;      console.error('Erreur lors de la restauration de la session:', err)&#10;      logout()&#10;    }&#10;  }&#10;&#10;  return {&#10;    user,&#10;    token,&#10;    isLoading,&#10;    error,&#10;    isAuthenticated,&#10;    isAdmin,&#10;    login,&#10;    logout,&#10;    restoreSession,&#10;  }&#10;})&#10;&#10;" />
              <option name="updatedContent" value="import {computed, ref} from 'vue'&#10;import {defineStore} from 'pinia'&#10;import {jwtDecode} from 'jwt-decode'&#10;import {getApiClient, updateApiToken} from '@/api/client'&#10;import {useGroupStore} from './group'&#10;&#10;/**&#10; * Interface représentant un utilisateur authentifié&#10; */&#10;export interface User {&#10;  id: string&#10;  username: string&#10;  email: string&#10;  roles: string[]&#10;  groupIds?: string[]&#10;}&#10;&#10;/**&#10; * Interface pour le payload du JWT&#10; */&#10;interface JwtPayload {&#10;  sub: string // userId&#10;  isAdmin: boolean&#10;  groupIds?: string[]&#10;  iat: number&#10;  exp: number&#10;}&#10;&#10;/**&#10; * Store gérant l'authentification et l'état de l'utilisateur&#10; */&#10;export const useAuthStore = defineStore('auth', () =&gt; {&#10;  const user = ref&lt;User | null&gt;(null)&#10;  const token = ref&lt;string | null&gt;(null)&#10;  const isLoading = ref(false)&#10;  const error = ref&lt;string | null&gt;(null)&#10;&#10;  const isAuthenticated = computed(() =&gt; !!user.value)&#10;  const isAdmin = computed(() =&gt; user.value?.roles.includes('ADMIN') ?? false)&#10;&#10;  /**&#10;   * Connexion de l'utilisateur&#10;   */&#10;  async function login(email: string, password: string) {&#10;    isLoading.value = true&#10;    error.value = null&#10;&#10;    try {&#10;      const apiClient = getApiClient()&#10;      const response = await apiClient.login({email, password})&#10;&#10;      const authData = response.data&#10;&#10;      // Décoder le token JWT pour extraire les groupIds&#10;      const decodedToken = jwtDecode&lt;JwtPayload&gt;(authData.token)&#10;      const groupIds = decodedToken.groupIds || []&#10;&#10;      // Construire l'objet User à partir de la réponse&#10;      user.value = {&#10;        id: authData.userId,&#10;        username: email.split('@')[0] || email, // Utiliser la partie avant @ comme username&#10;        email: email,&#10;        roles: authData.isAdmin ? ['ADMIN'] : ['USER'],&#10;        groupIds: groupIds&#10;      }&#10;      token.value = authData.token&#10;&#10;      // Mettre à jour le client API avec le nouveau token&#10;      updateApiToken(authData.token)&#10;&#10;      // Stocker le token dans localStorage&#10;      localStorage.setItem('auth_token', authData.token)&#10;      localStorage.setItem('user', JSON.stringify(user.value))&#10;&#10;      // Récupérer les groupes de l'utilisateur&#10;      if (authData.isAdmin &amp;&amp; groupIds.length &gt; 0) {&#10;        const groupStore = useGroupStore()&#10;        await groupStore.fetchGroups()&#10;      }&#10;&#10;      return true&#10;    } catch (err: any) {&#10;      if (err.response?.status === 403) {&#10;        error.value = 'Accès réservé aux administrateurs'&#10;      } else if (err.response?.status === 401) {&#10;        error.value = 'Identifiants incorrects'&#10;      } else {&#10;        error.value = err.response?.data?.message || 'Erreur de connexion'&#10;      }&#10;      return false&#10;    } finally {&#10;      isLoading.value = false&#10;    }&#10;  }&#10;&#10;  /**&#10;   * Déconnexion de l'utilisateur&#10;   */&#10;  function logout() {&#10;    user.value = null&#10;    token.value = null&#10;    localStorage.removeItem('auth_token')&#10;    localStorage.removeItem('user')&#10;    // Réinitialiser le client API&#10;    updateApiToken(null)&#10;    // Réinitialiser le store group&#10;    const groupStore = useGroupStore()&#10;    groupStore.reset()&#10;  }&#10;&#10;  /**&#10;   * Restaurer la session depuis localStorage&#10;   */&#10;  async function restoreSession() {&#10;    try {&#10;      const storedToken = localStorage.getItem('auth_token')&#10;      const storedUser = localStorage.getItem('user')&#10;&#10;      // Vérifier que les valeurs existent et ne sont pas &quot;undefined&quot; ou &quot;null&quot;&#10;      if (&#10;        storedToken &amp;&amp;&#10;        storedUser &amp;&amp;&#10;        storedToken !== 'undefined' &amp;&amp;&#10;        storedToken !== 'null' &amp;&amp;&#10;        storedUser !== 'undefined' &amp;&amp;&#10;        storedUser !== 'null'&#10;      ) {&#10;        token.value = storedToken&#10;        user.value = JSON.parse(storedUser)&#10;        // Mettre à jour le client API avec le token restauré&#10;        updateApiToken(storedToken)&#10;&#10;        // Décoder le token pour extraire les groupIds et les récupérer&#10;        try {&#10;          const decodedToken = jwtDecode&lt;JwtPayload&gt;(storedToken)&#10;          const groupIds = decodedToken.groupIds || []&#10;&#10;          if (decodedToken.isAdmin &amp;&amp; groupIds.length &gt; 0) {&#10;            const groupStore = useGroupStore()&#10;            await groupStore.fetchGroups()&#10;          }&#10;        } catch (decodeError) {&#10;          console.error('Erreur lors du décodage du token:', decodeError)&#10;          // Le token est peut-être expiré ou invalide, on continue sans récupérer les groupes&#10;        }&#10;      } else {&#10;        // Nettoyer le localStorage si les données sont invalides&#10;        logout()&#10;      }&#10;    } catch (err) {&#10;      // En cas d'erreur de parsing JSON, nettoyer le localStorage&#10;      console.error('Erreur lors de la restauration de la session:', err)&#10;      logout()&#10;    }&#10;  }&#10;&#10;  return {&#10;    user,&#10;    token,&#10;    isLoading,&#10;    error,&#10;    isAuthenticated,&#10;    isAdmin,&#10;    login,&#10;    logout,&#10;    restoreSession,&#10;  }&#10;})&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/wishgifthub-ui/src/stores/group.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/wishgifthub-ui/src/stores/group.ts" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="import {ref} from 'vue'&#10;import {defineStore} from 'pinia'&#10;import {getApiClient} from '@/api/client'&#10;import type {GroupResponse, UserResponse} from '@/generated/api/wish/data-contracts'&#10;&#10;/**&#10; * Type pour un groupe (alias de GroupResponse)&#10; */&#10;export type Group = GroupResponse&#10;&#10;/**&#10; * Type pour un membre de groupe (alias de UserResponse)&#10; */&#10;export type GroupMember = UserResponse&#10;&#10;/**&#10; * Store gérant les groupes de l'utilisateur&#10; */&#10;export const useGroupStore = defineStore('group', () =&gt; {&#10;  const groups = ref&lt;GroupResponse[]&gt;([])&#10;  const members = ref&lt;UserResponse[]&gt;([])&#10;  const isLoading = ref(false)&#10;  const error = ref&lt;string | null&gt;(null)&#10;&#10;  /**&#10;   * Récupère tous les groupes de l'administrateur&#10;   */&#10;  async function fetchGroups() {&#10;    isLoading.value = true&#10;    error.value = null&#10;&#10;    try {&#10;      const apiClient = getApiClient()&#10;      const response = await apiClient.getGroups()&#10;      groups.value = response.data&#10;      return groups.value&#10;    } catch (err: any) {&#10;      error.value = err.response?.data?.message || 'Erreur lors de la récupération des groupes'&#10;      throw err&#10;    } finally {&#10;      isLoading.value = false&#10;    }&#10;  }&#10;&#10;  /**&#10;   * Récupère les groupes de l'utilisateur connecté (admin ou invité)&#10;   */&#10;  async function fetchMyGroups() {&#10;    isLoading.value = true&#10;    error.value = null&#10;&#10;    try {&#10;      const apiClient = getApiClient()&#10;      const response = await apiClient.getUserGroups()&#10;      groups.value = response.data&#10;      return groups.value&#10;    } catch (err: any) {&#10;      error.value = err.response?.data?.message || 'Erreur lors de la récupération des groupes'&#10;      throw err&#10;    } finally {&#10;      isLoading.value = false&#10;    }&#10;  }&#10;&#10;  /**&#10;   * Récupère les groupes par leurs IDs&#10;   */&#10;  async function fetchGroupsByIds(groupIds: string[]) {&#10;    if (groupIds.length === 0) {&#10;      groups.value = []&#10;      return groups.value&#10;    }&#10;&#10;    // Pour l'instant, on récupère tous les groupes et on filtre&#10;    // Une optimisation future pourrait être d'ajouter un endpoint pour récupérer par IDs&#10;    await fetchGroups()&#10;    groups.value = groups.value.filter(group =&gt; groupIds.includes(group.id))&#10;    return groups.value&#10;  }&#10;&#10;  /**&#10;   * Récupère les membres d'un groupe&#10;   */&#10;  async function fetchGroupMembers(groupId: string) {&#10;    isLoading.value = true&#10;    error.value = null&#10;&#10;    try {&#10;      const apiClient = getApiClient()&#10;      const response = await apiClient.getUsersByGroup(groupId)&#10;      members.value = response.data&#10;      return members.value&#10;    } catch (err: any) {&#10;      error.value = err.response?.data?.message || 'Erreur lors de la récupération des membres'&#10;      throw err&#10;    } finally {&#10;      isLoading.value = false&#10;    }&#10;  }&#10;&#10;  /**&#10;   * Crée un nouveau groupe&#10;   */&#10;  async function createGroup(name: string, type: 'noël' = 'noël') {&#10;    isLoading.value = true&#10;    error.value = null&#10;&#10;    try {&#10;      const apiClient = getApiClient()&#10;      const response = await apiClient.createGroup({name, type})&#10;      &#10;      // Ajouter le nouveau groupe à la liste&#10;      if (response.data) {&#10;        groups.value.push(response.data)&#10;      }&#10;      &#10;      return true&#10;    } catch (err: any) {&#10;      error.value = err.response?.data?.message || 'Erreur lors de la création du groupe'&#10;      return false&#10;    } finally {&#10;      isLoading.value = false&#10;    }&#10;  }&#10;&#10;  /**&#10;   * Réinitialise le store&#10;   */&#10;  function reset() {&#10;    groups.value = []&#10;    members.value = []&#10;    error.value = null&#10;    isLoading.value = false&#10;  }&#10;&#10;  return {&#10;    groups,&#10;    members,&#10;    isLoading,&#10;    error,&#10;    fetchGroups,&#10;    fetchMyGroups,&#10;    fetchGroupsByIds,&#10;    fetchGroupMembers,&#10;    createGroup,&#10;    reset,&#10;  }&#10;})&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/wishgifthub-ui/src/views/HomeView.vue">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/wishgifthub-ui/src/views/HomeView.vue" />
              <option name="originalContent" value="&lt;script setup lang=&quot;ts&quot;&gt;&#10;import {onMounted, ref} from 'vue'&#10;import {useAuthStore} from '@/stores/auth'&#10;import {useGroupStore} from '@/stores/group'&#10;import LoginForm from '@/components/LoginForm.vue'&#10;import CreateGroupButton from '@/components/CreateGroupButton.vue'&#10;import GroupCard from '@/components/GroupCard.vue'&#10;import InvitationsDialog from '@/components/InvitationsDialog.vue'&#10;&#10;const authStore = useAuthStore()&#10;const groupStore = useGroupStore()&#10;&#10;const showMembersDialog = ref(false)&#10;const selectedGroupId = ref&lt;string | null&gt;(null)&#10;&#10;onMounted(() =&gt; {&#10;  // Restaurer la session si elle existe&#10;  authStore.restoreSession()&#10;&#10;  // Charger les groupes si l'utilisateur est connecté&#10;  if (authStore.isAuthenticated) {&#10;    loadGroups()&#10;  }&#10;})&#10;&#10;async function loadGroups() {&#10;  await groupStore.fetchMyGroups()&#10;}&#10;&#10;async function handleLoginSuccess() {&#10;  await loadGroups()&#10;}&#10;&#10;async function handleGroupCreated() {&#10;  await loadGroups()&#10;}&#10;&#10;async function handleShowMembers(groupId: string) {&#10;  selectedGroupId.value = groupId&#10;  showMembersDialog.value = true&#10;  await groupStore.fetchGroupMembers(groupId)&#10;}&#10;&#10;function handleCloseMembers() {&#10;  showMembersDialog.value = false&#10;  selectedGroupId.value = null&#10;}&#10;&#10;function handleLogout() {&#10;  authStore.logout()&#10;  groupStore.groups = []&#10;}&#10;&lt;/script&gt;&#10;&#10;&lt;template&gt;&#10;  &lt;v-container fluid class=&quot;py-8 px-6&quot;&gt;&#10;    &lt;!-- Page d'accueil - Non connecté --&gt;&#10;    &lt;div v-if=&quot;!authStore.isAuthenticated&quot; class=&quot;text-center&quot;&gt;&#10;      &lt;v-row justify=&quot;center&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot; md=&quot;8&quot; lg=&quot;6&quot;&gt;&#10;          &lt;v-icon size=&quot;80&quot; color=&quot;primary&quot; class=&quot;mb-4&quot;&gt;mdi-gift-outline&lt;/v-icon&gt;&#10;          &lt;h1 class=&quot;text-h3 font-weight-bold mb-2&quot;&gt;Bienvenue sur WishGiftHub&lt;/h1&gt;&#10;          &lt;p class=&quot;text-h6 text-medium-emphasis mb-8&quot;&gt;&#10;            Gérez vos listes de souhaits et partagez-les avec vos proches&#10;          &lt;/p&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;&#10;      &lt;v-row justify=&quot;center&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot; md=&quot;8&quot; lg=&quot;6&quot; xl=&quot;4&quot;&gt;&#10;          &lt;LoginForm @login-success=&quot;handleLoginSuccess&quot; /&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Dashboard - Connecté --&gt;&#10;    &lt;div v-else&gt;&#10;      &lt;!-- En-tête avec info utilisateur --&gt;&#10;      &lt;v-row class=&quot;mb-6&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot;&gt;&#10;          &lt;v-card elevation=&quot;2&quot;&gt;&#10;            &lt;v-card-text class=&quot;d-flex align-center justify-space-between&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;div class=&quot;text-h5 mb-1&quot;&gt;&#10;                  &lt;v-icon class=&quot;mr-2&quot;&gt;mdi-account-circle&lt;/v-icon&gt;&#10;                  Bonjour, {{ authStore.user?.username }}&#10;                &lt;/div&gt;&#10;                &lt;v-chip&#10;                  v-if=&quot;authStore.isAdmin&quot;&#10;                  color=&quot;primary&quot;&#10;                  size=&quot;small&quot;&#10;                  prepend-icon=&quot;mdi-shield-crown&quot;&#10;                  class=&quot;mt-2&quot;&#10;                &gt;&#10;                  Administrateur&#10;                &lt;/v-chip&gt;&#10;              &lt;/div&gt;&#10;              &lt;v-btn&#10;                variant=&quot;outlined&quot;&#10;                color=&quot;error&quot;&#10;                prepend-icon=&quot;mdi-logout&quot;&#10;                @click=&quot;handleLogout&quot;&#10;              &gt;&#10;                Déconnexion&#10;              &lt;/v-btn&gt;&#10;            &lt;/v-card-text&gt;&#10;          &lt;/v-card&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;&#10;      &lt;!-- Bouton créer un groupe (admin uniquement) --&gt;&#10;      &lt;v-row v-if=&quot;authStore.isAdmin&quot; class=&quot;mb-4&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot;&gt;&#10;          &lt;CreateGroupButton @group-created=&quot;handleGroupCreated&quot; /&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;&#10;      &lt;!-- Liste des groupes --&gt;&#10;      &lt;v-row&gt;&#10;        &lt;v-col cols=&quot;12&quot;&gt;&#10;          &lt;v-card elevation=&quot;2&quot;&gt;&#10;            &lt;v-card-title class=&quot;pa-4&quot;&gt;&#10;              &lt;div class=&quot;text-h6&quot;&gt;&#10;                &lt;v-icon class=&quot;mr-2&quot;&gt;mdi-account-group&lt;/v-icon&gt;&#10;                Mes groupes&#10;              &lt;/div&gt;&#10;            &lt;/v-card-title&gt;&#10;&#10;            &lt;v-divider /&gt;&#10;&#10;            &lt;v-card-text class=&quot;pa-4&quot;&gt;&#10;              &lt;!-- Chargement --&gt;&#10;              &lt;v-progress-linear&#10;                v-if=&quot;groupStore.isLoading&quot;&#10;                indeterminate&#10;                color=&quot;primary&quot;&#10;                class=&quot;mb-4&quot;&#10;              /&gt;&#10;&#10;              &lt;!-- Aucun groupe --&gt;&#10;              &lt;div&#10;                v-else-if=&quot;groupStore.groups.length === 0&quot;&#10;                class=&quot;text-center py-8&quot;&#10;              &gt;&#10;                &lt;v-icon size=&quot;64&quot; color=&quot;grey-lighten-1&quot;&gt;mdi-account-group-outline&lt;/v-icon&gt;&#10;                &lt;div class=&quot;text-h6 text-medium-emphasis mt-4&quot;&gt;&#10;                  Vous n'appartenez à aucun groupe&#10;                &lt;/div&gt;&#10;                &lt;div v-if=&quot;authStore.isAdmin&quot; class=&quot;text-body-1 text-medium-emphasis mt-2&quot;&gt;&#10;                  Créez votre premier groupe pour commencer&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;&#10;              &lt;!-- Liste des groupes --&gt;&#10;              &lt;div v-else&gt;&#10;                &lt;GroupCard&#10;                  v-for=&quot;group in groupStore.groups&quot;&#10;                  :key=&quot;group.id&quot;&#10;                  :group=&quot;group&quot;&#10;                  :is-admin=&quot;authStore.isAdmin&quot;&#10;                  @show-members=&quot;handleShowMembers&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/v-card-text&gt;&#10;          &lt;/v-card&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Dialog des membres --&gt;&#10;    &lt;v-dialog v-model=&quot;showMembersDialog&quot; max-width=&quot;700&quot;&gt;&#10;      &lt;InvitationsDialog&#10;        :members=&quot;groupStore.members&quot;&#10;        :is-loading=&quot;groupStore.isLoading&quot;&#10;        @close=&quot;handleCloseMembers&quot;&#10;      /&gt;&#10;    &lt;/v-dialog&gt;&#10;  &lt;/v-container&gt;&#10;&lt;/template&gt;&#10;&#10;&#10;" />
              <option name="updatedContent" value="&lt;script setup lang=&quot;ts&quot;&gt;&#10;import {onMounted, ref} from 'vue'&#10;import {useAuthStore} from '@/stores/auth'&#10;import {useGroupStore} from '@/stores/group'&#10;import LoginForm from '@/components/LoginForm.vue'&#10;import CreateGroupButton from '@/components/CreateGroupButton.vue'&#10;import GroupCard from '@/components/GroupCard.vue'&#10;import InvitationsDialog from '@/components/InvitationsDialog.vue'&#10;&#10;const authStore = useAuthStore()&#10;const groupStore = useGroupStore()&#10;&#10;const showMembersDialog = ref(false)&#10;const selectedGroupId = ref&lt;string | null&gt;(null)&#10;&#10;onMounted(() =&gt; {&#10;  // Restaurer la session si elle existe&#10;  authStore.restoreSession()&#10;&#10;  // Charger les groupes si l'utilisateur est connecté&#10;  if (authStore.isAuthenticated) {&#10;    loadGroups()&#10;  }&#10;})&#10;&#10;async function loadGroups() {&#10;  await groupStore.fetchMyGroups()&#10;}&#10;&#10;async function handleLoginSuccess() {&#10;  // Les groupes sont déjà chargés automatiquement par le store auth lors du login&#10;  // Pas besoin de les recharger ici&#10;}&#10;&#10;async function handleGroupCreated() {&#10;  await loadGroups()&#10;}&#10;&#10;async function handleShowMembers(groupId: string) {&#10;  selectedGroupId.value = groupId&#10;  showMembersDialog.value = true&#10;  await groupStore.fetchGroupMembers(groupId)&#10;}&#10;&#10;function handleCloseMembers() {&#10;  showMembersDialog.value = false&#10;  selectedGroupId.value = null&#10;}&#10;&#10;function handleLogout() {&#10;  authStore.logout()&#10;  groupStore.groups = []&#10;}&#10;&lt;/script&gt;&#10;&#10;&lt;template&gt;&#10;  &lt;v-container fluid class=&quot;py-8 px-6&quot;&gt;&#10;    &lt;!-- Page d'accueil - Non connecté --&gt;&#10;    &lt;div v-if=&quot;!authStore.isAuthenticated&quot; class=&quot;text-center&quot;&gt;&#10;      &lt;v-row justify=&quot;center&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot; md=&quot;8&quot; lg=&quot;6&quot;&gt;&#10;          &lt;v-icon size=&quot;80&quot; color=&quot;primary&quot; class=&quot;mb-4&quot;&gt;mdi-gift-outline&lt;/v-icon&gt;&#10;          &lt;h1 class=&quot;text-h3 font-weight-bold mb-2&quot;&gt;Bienvenue sur WishGiftHub&lt;/h1&gt;&#10;          &lt;p class=&quot;text-h6 text-medium-emphasis mb-8&quot;&gt;&#10;            Gérez vos listes de souhaits et partagez-les avec vos proches&#10;          &lt;/p&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;&#10;      &lt;v-row justify=&quot;center&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot; md=&quot;8&quot; lg=&quot;6&quot; xl=&quot;4&quot;&gt;&#10;          &lt;LoginForm @login-success=&quot;handleLoginSuccess&quot; /&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Dashboard - Connecté --&gt;&#10;    &lt;div v-else&gt;&#10;      &lt;!-- En-tête avec info utilisateur --&gt;&#10;      &lt;v-row class=&quot;mb-6&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot;&gt;&#10;          &lt;v-card elevation=&quot;2&quot;&gt;&#10;            &lt;v-card-text class=&quot;d-flex align-center justify-space-between&quot;&gt;&#10;              &lt;div&gt;&#10;                &lt;div class=&quot;text-h5 mb-1&quot;&gt;&#10;                  &lt;v-icon class=&quot;mr-2&quot;&gt;mdi-account-circle&lt;/v-icon&gt;&#10;                  Bonjour, {{ authStore.user?.username }}&#10;                &lt;/div&gt;&#10;                &lt;v-chip&#10;                  v-if=&quot;authStore.isAdmin&quot;&#10;                  color=&quot;primary&quot;&#10;                  size=&quot;small&quot;&#10;                  prepend-icon=&quot;mdi-shield-crown&quot;&#10;                  class=&quot;mt-2&quot;&#10;                &gt;&#10;                  Administrateur&#10;                &lt;/v-chip&gt;&#10;              &lt;/div&gt;&#10;              &lt;v-btn&#10;                variant=&quot;outlined&quot;&#10;                color=&quot;error&quot;&#10;                prepend-icon=&quot;mdi-logout&quot;&#10;                @click=&quot;handleLogout&quot;&#10;              &gt;&#10;                Déconnexion&#10;              &lt;/v-btn&gt;&#10;            &lt;/v-card-text&gt;&#10;          &lt;/v-card&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;&#10;      &lt;!-- Bouton créer un groupe (admin uniquement) --&gt;&#10;      &lt;v-row v-if=&quot;authStore.isAdmin&quot; class=&quot;mb-4&quot;&gt;&#10;        &lt;v-col cols=&quot;12&quot;&gt;&#10;          &lt;CreateGroupButton @group-created=&quot;handleGroupCreated&quot; /&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;&#10;      &lt;!-- Liste des groupes --&gt;&#10;      &lt;v-row&gt;&#10;        &lt;v-col cols=&quot;12&quot;&gt;&#10;          &lt;v-card elevation=&quot;2&quot;&gt;&#10;            &lt;v-card-title class=&quot;pa-4&quot;&gt;&#10;              &lt;div class=&quot;text-h6&quot;&gt;&#10;                &lt;v-icon class=&quot;mr-2&quot;&gt;mdi-account-group&lt;/v-icon&gt;&#10;                Mes groupes&#10;              &lt;/div&gt;&#10;            &lt;/v-card-title&gt;&#10;&#10;            &lt;v-divider /&gt;&#10;&#10;            &lt;v-card-text class=&quot;pa-4&quot;&gt;&#10;              &lt;!-- Chargement --&gt;&#10;              &lt;v-progress-linear&#10;                v-if=&quot;groupStore.isLoading&quot;&#10;                indeterminate&#10;                color=&quot;primary&quot;&#10;                class=&quot;mb-4&quot;&#10;              /&gt;&#10;&#10;              &lt;!-- Aucun groupe --&gt;&#10;              &lt;div&#10;                v-else-if=&quot;groupStore.groups.length === 0&quot;&#10;                class=&quot;text-center py-8&quot;&#10;              &gt;&#10;                &lt;v-icon size=&quot;64&quot; color=&quot;grey-lighten-1&quot;&gt;mdi-account-group-outline&lt;/v-icon&gt;&#10;                &lt;div class=&quot;text-h6 text-medium-emphasis mt-4&quot;&gt;&#10;                  Vous n'appartenez à aucun groupe&#10;                &lt;/div&gt;&#10;                &lt;div v-if=&quot;authStore.isAdmin&quot; class=&quot;text-body-1 text-medium-emphasis mt-2&quot;&gt;&#10;                  Créez votre premier groupe pour commencer&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;&#10;              &lt;!-- Liste des groupes --&gt;&#10;              &lt;div v-else&gt;&#10;                &lt;GroupCard&#10;                  v-for=&quot;group in groupStore.groups&quot;&#10;                  :key=&quot;group.id&quot;&#10;                  :group=&quot;group&quot;&#10;                  :is-admin=&quot;authStore.isAdmin&quot;&#10;                  @show-members=&quot;handleShowMembers&quot;&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/v-card-text&gt;&#10;          &lt;/v-card&gt;&#10;        &lt;/v-col&gt;&#10;      &lt;/v-row&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- Dialog des membres --&gt;&#10;    &lt;v-dialog v-model=&quot;showMembersDialog&quot; max-width=&quot;700&quot;&gt;&#10;      &lt;InvitationsDialog&#10;        :members=&quot;groupStore.members&quot;&#10;        :is-loading=&quot;groupStore.isLoading&quot;&#10;        @close=&quot;handleCloseMembers&quot;&#10;      /&gt;&#10;    &lt;/v-dialog&gt;&#10;  &lt;/v-container&gt;&#10;&lt;/template&gt;&#10;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>